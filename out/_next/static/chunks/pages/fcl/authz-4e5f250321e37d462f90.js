(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{7047:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(1735),i=r(2809),o=r(7501),c=r(3324);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={border:"1px solid",borderColor:"gray.200",backgroundColor:"white",display:"flex",alignItems:"center",overflow:"hidden","> img":{width:"100%"}};function l(e){var t=e.address,r=void 0===t?"":t,i=e.src,d=e.seed,l=e.sxStyles,u=void 0===l?{}:l,p=e.lg,f=e.flowAccountAddress,g=e.avatarUrl,h=p?65:40,b=o.withPrefix(r),v=b===o.withPrefix(f),y=v?"/settings.svg":function(e,t){return encodeURI("".concat(e,"avatar/").concat(t,".svg"))}(g,"".concat(b,"-").concat(d));return(0,n.tZ)("div",{sx:a(a(a({},s),u),{},{width:h,height:h,borderRadius:h,border:v?0:u.border||s.border}),children:(0,n.tZ)(c.Img,{src:[i||y,"/missing-avatar-icon.svg"]})})}},7165:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(1735),i={image:{borderRadius:65,width:65}};function o(e){var t=e.icon,r=t||"/missing-app-icon.svg";return(0,n.tZ)("img",{src:r,sx:i.image,title:t?void 0:"Missing app icon"})}},2827:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return X}});var n=r(1735),i=r(7501),o=r(6600),c=r(2809),d=r(11),a=r(9536),s=r(4972),l=r(7294),u="cadence";var p=r(5914);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={codeContainer:{mx:[-15,-30]},block:{backgroundColor:"gray.100",overflow:"hidden",cursor:"pointer",py:15,px:[15,30]},blockExpanded:{backgroundColor:"white",maxHeight:"initial",cursor:"inherit",pl:1,py:0,borderBottomRightRadius:8,borderBottomLeftRadius:8,code:{"> span:before":{display:"inline-block"}}},code:{display:"flex",flexDirection:"column",whiteSpace:"pre","> br":{display:"none"},"> span":{counterIncrement:"line","&:first-of-type:before":{pt:2},"&:last-of-type:before":{pb:2},"&:before":{display:"none",backgroundColor:"gray.100",borderRight:"1px solid",borderColor:"gray.300",content:"counter(line)",color:"gray.500",textAlign:"center",mr:3,px:"2px",minWidth:20}}},header:{height:30,px:[15,30],display:"flex",alignItems:"center",justifyContent:"space-between",borderTop:"1px solid",borderBottom:"1px solid",borderColor:"gray.200"},headerTitle:{color:"gray.300",textTransform:"uppercase",fontSize:0},largeExpandButton:{background:"transparent",border:0,padding:0,display:"block",width:"100%",textAlign:"initial"}};function b(e){var t=e.isExpanded,r=e.colorizedSafeHtml;return(0,n.tZ)("div",{sx:g(g({},h.block),t?h.blockExpanded:{}),children:r.length>0&&(0,n.tZ)("code",{sx:g(g({},h.code),{},{overflow:t?"scroll":"hidden"}),dangerouslySetInnerHTML:{__html:r}})})}function v(e){var t=e.title,r=e.value,i=(0,s.Ik)(),o=(0,l.useState)(""),c=o[0],a=o[1],f=(0,d.Z)(),v=f.isExpanded,y=f.setCodePreview;(0,l.useEffect)((function(){i&&(!function(e){e.languages.register({id:u,extensions:[".cdc"],aliases:["CDC","cdc"]}),e.languages.setMonarchTokensProvider(u,{keywords:["if","else","return","continue","break","while","pre","post","prepare","execute","import","from","create","destroy","priv","pub","get","set","log","emit","event","init","struct","interface","fun","let","var","resource","access","all","contract","self","transaction"],typeKeywords:["AnyStruct","AnyResource","Void","Never","String","Character","Bool","Self","Int8","Int16","Int32","Int64","Int128","Int256","UInt8","UInt16","UInt32","UInt64","UInt128","UInt256","Word8","Word16","Word32","Word64","Word128","Word256","Fix64","UFix64"],operators:["<-","<=",">=","==","!=","+","-","*","/","%","&","!","&&","||","?","??",":","=","@"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"]|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w]*/,"type.identifier"],{include:"@whitespace"},[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)/,"number.hex"],[/0[oO]?(@octaldigits)/,"number.octal"],[/0[bB](@binarydigits)/,"number.binary"],[/(@digits)/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]]}})}(i),i.editor.colorize(r,u,{tabSize:2}).then(a))}),[i,r]);var m=function(){return y({title:t,value:r})};return(0,n.BX)("div",{sx:h.codeContainer,children:[(0,n.BX)("div",{sx:g(g({},h.header),{},{borderTop:v?0:h.header.borderTop}),children:[(0,n.tZ)("div",{sx:h.headerTitle,children:t}),!v&&(0,n.tZ)("div",{children:(0,n.tZ)(p.Z,{onClick:m})})]}),v?(0,n.tZ)(b,{isExpanded:v,colorizedSafeHtml:c}):(0,n.tZ)("button",{onClick:m,sx:h.largeExpandButton,children:(0,n.tZ)(b,{isExpanded:v,colorizedSafeHtml:c})})]})}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={container:{display:"flex",flexDirection:"column",flex:1,height:"100%",mx:[-15,-30]},wrappedValue:{width:[170,200],overflowWrap:"break-word",textAlign:"right",ml:"auto"},codeContainer:{mt:3,mb:-20,maxWidth:[332,"100%"]}};var w=function(){var e=(0,d.Z)(),t=e.proposer,r=e.payer,i=e.authorizers,o=e.proposalKey,c=e.computeLimit,s=e.refBlock,l=e.args,u=e.cadence;return(0,n.tZ)("div",{sx:x.container,children:(0,n.BX)("div",{sx:{px:[15,30],display:"flex",flexDirection:"column","overflow-x":"hidden"},children:[(0,n.BX)(a.ZP,{children:[(0,n.BX)(a.Pk,{children:[(0,n.tZ)("td",{children:"Proposer"}),(0,n.tZ)("td",{children:(0,n.tZ)(a.jW,{account:t})})]}),(0,n.BX)(a.Pk,{children:[(0,n.tZ)("td",{children:"Payer"}),(0,n.tZ)("td",{children:(0,n.tZ)(a.jW,{account:r})})]}),(0,n.BX)(a.Pk,{children:[(0,n.tZ)("td",{children:"Authorizers"}),(0,n.tZ)("td",{children:i.map((function(e){return(0,n.tZ)(a.jW,{account:e},e.address)}))})]}),(0,n.BX)(a.Pk,{children:[(0,n.tZ)("td",{children:"Proposal Key"}),(0,n.tZ)("td",{children:(0,n.tZ)("div",{sx:x.wrappedValue,children:o.keyId})})]}),(0,n.BX)(a.Pk,{children:[(0,n.tZ)("td",{children:"Sequence #"}),(0,n.tZ)("td",{children:o.sequenceNum})]}),(0,n.BX)(a.Pk,{children:[(0,n.tZ)("td",{children:"Gas Limit"}),(0,n.tZ)("td",{children:c})]}),(0,n.BX)(a.Pk,{children:[(0,n.tZ)("td",{children:"Reference Block"}),(0,n.tZ)("td",{children:(0,n.tZ)("div",{sx:m(m({},x.wrappedValue),{},{letterSpacing:"0.25em"}),children:s})})]})]}),(0,n.BX)("div",{sx:x.codeContainer,children:[(0,n.tZ)(v,{title:"Arguments",value:JSON.stringify(l,null,2)}),(0,n.tZ)(v,{title:"Script Source Code",value:u})]})]})})},Z=r(4007),O=r(7988),P=r(7047),k=r(7165),j={header:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",pt:4},headerSection:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"50%",px:[0,3],zIndex:1},label:{position:"relative",width:"auto",display:"flex",alignItems:"center"},greenDot:{position:"absolute",mt:"-2px",left:-15,backgroundColor:"primary",width:7,height:7,borderRadius:7},transactionIcon:{position:"absolute",top:45}};var _=function(e){var t,r,i,o,c=e.flowAccountAddress,a=e.avatarUrl,s=(0,d.Z)(),l=s.currentUser,u=s.connectedAppConfig,p=(null===u||void 0===u||null===(t=u.config)||void 0===t||null===(r=t.app)||void 0===r?void 0:r.title)||Z.jQ,f=null===u||void 0===u||null===(i=u.config)||void 0===i||null===(o=i.app)||void 0===o?void 0:o.icon;return(0,n.BX)("div",{sx:j.header,children:[(0,n.tZ)("div",{sx:j.transactionIcon,children:(0,n.tZ)("img",{src:"/transaction.svg"})}),(0,n.BX)("div",{sx:j.headerSection,children:[(0,n.tZ)(P.Z,{address:l.address,seed:p,lg:!0,flowAccountAddress:c,avatarUrl:a}),(0,n.BX)(O.__,{sx:j.label,children:[(0,n.tZ)("div",{sx:j.greenDot}),l.label]})]}),(0,n.BX)("div",{sx:j.headerSection,children:[(0,n.tZ)(k.Z,{icon:f}),(0,n.tZ)(O.__,{sx:j.label,children:p})]})]})},A=r(1905),C=r(8095),I=r(1674),S=r(4155);var E=r(4155);function B(){var e=E.env.NEXT_PUBLIC_FLOW_ACCOUNT_ADDRESS,t=E.env.NEXT_PUBLIC_FLOW_AVATAR_URL,r=(0,d.Z)(),c=r.isExpanded,a=r.codePreview,s=(0,d.Z)(),u=s.currentUser,p=s.proposalKey,f=s.message,g=s.id,h=(0,l.useState)(!1),b=h[0],y=h[1];return(0,n.tZ)(A.Z,{title:"Authorize Transaction",header:!c&&(0,n.tZ)(_,{flowAccountAddress:e,avatarUrl:t}),footer:!c&&(0,n.tZ)(o.Z,{onApprove:function(){y(!0);var e=function(e){var t={signature:(0,I.X)(S.env.NEXT_PUBLIC_FLOW_ACCOUNT_PRIVATE_KEY,e)};return console.log("signed"),console.log(I.X),console.log(t),t}(f);window.parent.postMessage({jsonrpc:"2.0",id:g,result:{f_type:"PollingResponse",f_vsn:"1.0.0",status:"APPROVED",reason:null,data:{f_type:"CompositeSignature",f_vsn:"1.0.0",addr:i.sansPrefix(u.address),keyId:Number(p.keyId),signature:e.signature}}},"*"),y(!1)},isLoading:b,onDecline:function(){return i.WalletUtils.close()}}),children:a?(0,n.tZ)(v,{title:a.title,value:a.value}):(0,n.tZ)(w,{})})}var X=function(e){return e.flowAccountAddress,e.avatarUrl,(0,n.tZ)(C.w,{children:(0,n.tZ)(B,{})})}},1674:function(e,t,r){"use strict";r.d(t,{n:function(){return a},X:function(){return s}});var n=r(7206),i=r(6266),o=r(5682),c=r(8764).Buffer,d=new i.ec("p256"),a=function(e){return(0,n.z)(e,n.kH,n.pk,1e3)};function s(e,t){var r=d.keyFromPrivate(c.from(e,"hex")).sign(function(e){var t=new o.Aj(256);return t.update(c.from(e,"hex")),t.digest()}(t)),n=r.r.toArrayLike(c,"be",32),i=r.s.toArrayLike(c,"be",32);return c.concat([n,i]).toString("hex")}},7207:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fcl/authz",function(){return r(2827)}])},6601:function(){},9214:function(){}},function(e){e.O(0,[774,435,503,469,966,972,517,888,179],(function(){return t=7207,e(e.s=t);var t}));var t=e.O();_N_E=t}]);